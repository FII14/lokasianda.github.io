<!-- File: admin.html -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Page</title>
</head>

<body>
  <h1>Konten Terbaru</h1>

  <ul id="konten-list"></ul>

  <form id="tambah-konten-form">
    <input type="text" id="judul-input" placeholder="Judul konten" required>
    <input type="text" id="gambar-input" placeholder="URL gambar" required>
    <textarea id="deskripsi-input" placeholder="Deskripsi konten" required></textarea>
    <button type="submit">Tambah</button>
  </form>

  <script>
    // Hapus konten
    function hapusKonten(event) {
      event.preventDefault();

      const kontenId = event.target.dataset.id;

      // Menghapus konten dari localStorage
      const savedKonten = localStorage.getItem('konten');
      const kontenArray = JSON.parse(savedKonten);

      const updatedKonten = kontenArray.filter(konten => konten.id !== kontenId);

      localStorage.setItem('konten', JSON.stringify(updatedKonten));

      // Mengirim event 'storage' agar halaman pengguna biasa juga mengupdate konten
      window.dispatchEvent(new Event('storage'));
    }

    // Tambah konten baru
    function tambahKonten(event) {
      event.preventDefault();

      const judulInput = document.getElementById('judul-input');
      const gambarInput = document.getElementById('gambar-input');
      const deskripsiInput = document.getElementById('deskripsi-input');

      const judul = judulInput.value;
      const gambarUrl = gambarInput.value;
      const deskripsi = deskripsiInput.value;

      const kontenId = new Date().getTime().toString();

      // Membuat objek konten baru
      const kontenBaru = {
        id: kontenId,
        judul: judul,
        gambarUrl: gambarUrl,
        deskripsi: deskripsi
      };

      // Mengambil konten dari localStorage
      const savedKonten = localStorage.getItem('konten');
      const kontenArray = JSON.parse(savedKonten) || [];

      // Menambahkan konten baru ke array konten
      kontenArray.push(kontenBaru);

      // Menyimpan kembali konten ke localStorage
      localStorage.setItem('konten', JSON.stringify(kontenArray));

      // Mengirim event 'storage' agar halaman pengguna biasa juga mengupdate konten
      window.dispatchEvent(new Event('storage'));

      // Mengosongkan input field setelah menambah konten
      judulInput.value = '';
      gambarInput.value = '';
      deskripsiInput.value = '';
    }

    // Mendapatkan konten dari localStorage saat halaman dimuat
    window.addEventListener('DOMContentLoaded', function() {
      const savedKonten = localStorage.getItem('konten');
      const kontenArray = JSON.parse(savedKonten) || [];

      const kontenList = document.getElementById('konten-list');
      kontenList.innerHTML = '';

      kontenArray.forEach(function(konten) {
        const listItem = document.createElement('li');
        listItem.setAttribute('data-id', konten.id);

        const judulElem = document.createElement('h3');
        judulElem.textContent = konten.judul;

        const gambar = document.createElement('img');
        gambar.src = konten.gambarUrl;
        gambar.alt = konten.judul;

        const deskripsiElem = document.createElement('p');
        deskripsiElem.textContent = konten.deskripsi;

        const hapusButton = document.createElement('button');
        hapusButton.className = 'hapus-konten';
        hapusButton.textContent = 'Hapus';
        hapusButton.setAttribute('data-id', konten.id);
        hapusButton.addEventListener('click', hapusKonten);

        listItem.appendChild(judulElem);
        listItem.appendChild(gambar);
        listItem.appendChild(deskripsiElem);
        listItem.appendChild(hapusButton);
        kontenList.appendChild(listItem);
      });
    });

    // Submit form untuk menambah konten baru
    const tambahKontenForm = document.getElementById('tambah-konten-form');
    tambahKontenForm.addEventListener('submit', tambahKonten);
  </script>
</body>

</html>
